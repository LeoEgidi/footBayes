% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/btd_foot.R
\name{btd_foot}
\alias{btd_foot}
\title{Bayesian Bradley-Terry-Davidson Model}
\usage{
btd_foot(
  data,
  dynamic_rank = FALSE,
  home_effect = FALSE,
  prior_par = list(psi = normal(0, 3), gamma = normal(0, 0.3), home = normal(0, 5)),
  rank_measure = "median",
  ...
)
}
\arguments{
\item{data}{A data frame containing the observations with columns:
\itemize{
  \item \code{periods}: Time point of each observation (integer >= 1).
  \item \code{home_team}: Home team's name (character string).
  \item \code{away_team}: Away team's name (character string).
  \item \code{match_outcome}: Outcome (1 if home team beats away team, 2 for tie, and 3 if away team beats home team).
}
The data frame must not contain missing values.}

\item{dynamic_rank}{Logical; if \code{TRUE}, uses a dynamic ranking model (default is \code{FALSE}).}

\item{home_effect}{Logical; if \code{TRUE}, includes a home effect in the model (default is \code{FALSE}).}

\item{prior_par}{A list specifying the prior distributions for the parameters of interest, using the \code{normal} function:
\itemize{
  \item \code{psi}: Prior for the team strengths (\code{psi}). Default is \code{normal(0, 3)}.
  \item \code{gamma}: Prior for the tie parameter (\code{gamma}). Default is \code{normal(0, 0.3)}.
  \item \code{home}: Prior for the home effect (\code{home}). Applicable only if \code{home_effect = TRUE}. Default is \code{normal(0, 5)}.
}
Only normal priors are allowed for this model.}

\item{rank_measure}{A character string specifying the method used to summarize the posterior distributions of the team strengths. Options are:
\itemize{
  \item \code{"median"}: Uses the median of the posterior samples (default).
  \item \code{"mean"}: Uses the mean of the posterior samples.
  \item \code{"MAP"}: Uses the Maximum A Posteriori estimate, calculated as the mode of the posterior distribution.
}}

\item{...}{Additional arguments passed to \code{\link[rstan]{stan}} (e.g., \code{iter}, \code{chains}, \code{control}).}
}
\value{
A list of class \code{"btdFoot"} containing:
  \itemize{
    \item \code{fit}: The fitted \code{stanfit} object returned by \code{\link[rstan]{stan}}.
    \item \code{rank}: A data frame with the rankings, including columns:
      \itemize{
        \item \code{periods}: The time period.
        \item \code{team}: The team name.
        \item \code{rank_points}: The estimated strength of the team based on the chosen \code{rank_measure}.
      }
    \item \code{data}: The original input data.
    \item \code{stan_data}: The data list prepared for Stan.
    \item \code{stan_code}: The path to the Stan model code used.
    \item \code{prior_par}: A list of the prior distributions used.
    \item \code{rank_measure}: The method used to compute the rankings.
  }
}
\description{
Fits a Bayesian Bradley-Terry-Davidson model using Stan. Supports both static and dynamic ranking models, allowing for the estimation of team strengths over time.
}
\examples{
\dontrun{

# Dynamic Ranking example ####

data <- data.frame(
  periods = c(1, 1, 2, 2, 3, 3, 4, 4),
  home_team = c("AC Milan", "Inter", "AC Milan", "Juventus", "Roma", "Inter", "Lecce", "Roma"),
  away_team = c("Inter", "Juventus", "Roma", "Roma", "Juventus", "AC Milan", "Juventus", "Lecce"),
  match_outcome = c(1, 3, 2, 3, 2, 3, 1, 2) # 1 = home team wins, 2 = draw, 3 = away team wins
)

# Fit the dynamic model using the median as rank measure
fit_result <- btd_foot(
  data = data,
  dynamic_rank = TRUE,
  prior_par = list(
    psi = normal(0, 10),
    gamma = normal(0, 5)
  ),
  rank_measure = "median",
  iter = 1000,
  chains = 2
)

print(fit_result$rank)

# Static Ranking example ####

data_static <- data.frame(
  periods = rep(1, 6),
  home_team = c("AC Milan", "Roma", "Juventus", "Inter", "Roma", "AC Milan"),
  away_team = c("Juventus", "Inter", "AC Milan", "Roma", "AC Milan", "Juventus"),
  match_outcome = c(1, 2, 3, 1, 2, 1) # 1 = home team wins, 2 = draw, 3 = away team wins
)

# Fit the static model using the MAP as rank measure
fit_result_static <- btd_foot(
  data = data_static,
  dynamic_rank = FALSE,
  home_effect = TRUE,
  prior_par = list(
    psi = normal(0, 1),
    gamma = normal(0, 1),
    home = normal(0, 2)
  ),
  rank_measure = "MAP",
  iter = 1000,
  chains = 2
)

print(fit_result_static$rank)
}
}
\author{
Roberto MacrÃ¬ Demartino \email{roberto.macridemartino@phd.unipd.it}.
}
